# 项目介绍

## 简介
这是一个方便背题的功能性网站，题目类型的适用范围包括面试题，英语单词（目前我只想到这两个）等。

这个项目分成前端quiz_client和quiz_server两个部分，前端用的是Vue2，后端用的是Express+MySql，关于前端和后端如何运行，我都写在了其目录下的readme里了，应该是比较详细的，如果遇到什么问题，欢迎提issue。

### 起因

这个项目的起因是因为我在背面试题时发现一个主要问题，就是每次我在开始背题时都会先瞄一眼那个题目，再马上把视线移开屏幕开始背。这样做有很大弊端，第一点就是借助短时记忆以为自己背会了，实际上过了两天马上就忘了，而你只顾着往下背，这样就会导致自己背了后面的忘了前面的；我时常就会怀疑自己真的记住了吗，所以我们需要一种反馈，能让我们知道我们大概记住了多少，这也是这个项目主要解决的问题；第二点就是，在瞄题目的同时很容易瞄到部分答案，这样就会帮助自己回忆，但实际上在真实面试情况下，你可不要奢望面试官会给你温馨提示。

### 计划该项目做哪些功能来解决上述问题？

1. 通过不停地让用户回顾旧题来加深记忆。首先用户要先手动输入题目和答案，导入到系统的知识数据库中，在有了一定体量的数据后，用户便可以开始复习题目，系统会在用户选择一个知识领域后，从该领域随机选择n道题目返回给客户端，用户在背题过程中，必须最终将当前题目分类为"已熟悉"，"已理解但不熟练","不理解"中的其中一种，因为用户对一个知识点的当前的理解程度最终的结果只可能是这三种，要么你已经熟练于心，要么是你已经理解了但是还不熟练，你不确定过几天还能不能想得起来，要么就是不理解，这个知识点目前超出了你能接受的认知范围。每一次背题结束，你都必须把n道题进行分类，经过一段时间后，你就能清楚地知道，自己背过多少道题，有多少道是熟练的，有多少是还不太熟的，有多少是无法理解的。当然，这么做的前提是，你对自己做出的选择要非常客观，如果你觉得这道题你已经熟练于心了，但实际上过几天你忘了，那么这个项目可能只对你起到误导作用。
2. 通过UI交互来解决可能会瞄到答案的问题。这个非常简单了，就是背题时，界面上只显示题目，只有用户通过某种交互（比如点击答案窗口）才能看到答案。

### 用户故事

要有一个手动输入题目和答案的地方，这个地方除了可以输入题目和答案外，还能根据关键字搜索数据库中的题目，这是因为，你输入的题目和答案不是一成不变的，有可能题目会让人产生歧义，也有可能答案不够完整，总之，一定要给个功能让我自己还能找到之前输过的题目，加以修改再传回数据库。

每个题目在输入时必须贴上一个知识标签，用以说明是什么领域的知识。这样有很多好处，搜题时可以根据标签搜，背题时也必须要选择一个知识标签进行背题。

每个题目在输入时必须选择重要程度，选项分别为非常重要，重要，一般和不重要。背题时，数据库会按照重要程度排序筛选题目返回给我。

开始背题前，我要先选择题目标签tag和题目数量n。之后，我会收到n道带有tag标签的题的数据，这n道题的默认组成是10%的"已熟悉"+50%的"已理解但不熟悉" + 40%的"未知"。是这样的，就像我在计划里说的，我在背题过程中，每背一题，就要做出选择："已熟悉"，"已理解但不熟悉","不理解"，当然考虑道我可能有难以抉择的情况，所以最好再加一个"我在考虑考虑"，这个选项会让该题目放回这n道题的队列中，前三个选项，会让该题出队列，并且在对应的数据库表中添加相关数据。所以数据库能找到带有"已熟悉"和"已理解但不熟悉"等这些关键词的数据并返回回去。40%的"未知"就是数据库中那些我还没背过的题。第一次背时，是没有带有这些关键词的数据的，这时候做个特殊处理(返回100%的"未知")就好了。

实际上，在1+5+4的设计中，存在一个bug，就是那些被我归类为不理解的题目，就这样放之不管了吗？如果在题目数量组成中加入那些不理解的题目，在现有的设计下是没有意义的，因为被分类为不理解的题目，它们就会被雪藏，你碰不到它们的情况下，就算在背题中遇到他们，你照样不会；像这种题需要私下去研究一段时间或者到了新的境界才能领会。我一开始的想法确实是，既然当前理解不了，就不要理解了，但现在想想又不太对，说不定过几天我会想回头看看这里面的题，所以我想还是搞出一个界面专门用于来看这些不理解的题，以及当你认为某些题你已经理解了后，你可以将其理解程度修改为"未知"，这样下次在背题时，你就有可能遇见它们。

后来我又想了下，我在那么多次选择中，怎么可能每次都能正确分类呢，有时候一个误点，可能把一个"已理解但不熟悉"的题分类到"已熟悉"，那就尴尬了。。所以不仅仅是"不理解"的题目可以被修改，对于其他理解程度的题目(除了未知)，都可以修改为"未知"。

我们还需要一个图表，来更直观地展示自己的背题成果，可以用一个饼状图来表示自己的背题情况。

### 开发日志

#### 开发公共题库功能

*2022/09/13*

昨天突然想到做一个公共题库功能，主要分为上传和下载两个功能。让有能力的人整理一套标准的题库出来，上传到公共题库，每个题库有一个共享密码，就像百度网盘的分享链接密码一样。个人用户可以通过共享密码将公共题库下载到自己的账户中，成为个人题库后，这套题库就可以随用户任意操作了。公共题库的好处是,方便用户，不需要从0开始收集题目，只需要拷贝一份现成题库，在其基础上修改上即可。  
实现这个功能很简单，需要增加两张表，分别是pub_repo和pub_quiz表（其实pub_repo的字段完全可以放在pub_quiz表中，但分两张表也无可厚非），分别代表公共题库和公共题目。用户选择自己账户内已有的一个题库，选择上传后，将题库id和用户id发给服务器，服务器调用一个上传的存储过程并传递参数，存储过程会找到这个题库以及该题库下所有的题目，将其拷贝到公共题库和公共题目表中，并给题库和题目都标上一个识别码。其他用户可以通过这个识别码下载题库，同样也是通过存储过程，就是把公共题库和公共题目表中的数据拷贝一份到其用户的题库和题目下。虽然这样会造成存储空间的浪费，但是在逻辑上是比较清晰的，这样的好处是方便我自己维护。

mysql存储过程踩坑：  
在使用游标提取数据时，由于之前声明了一个与游标对应sql中的select的一个列名相同的变量名，导致这列的数据怎么取都不对，后来改了声明的变量名后就解决了，这好像是mysql一直存在的bug，需要开发人员注意。

```sql
-- 与游标关联的sql select的列名tags重复，因此出现bug
declare tags json;
...
declare cur_quiz cursor for select question,answer,importance,tags from pub_quiz where `code` = code;
```

另外就是，个人用户在上传自己的题库后会收到一个该题库的共享密码，可是如果用户不想马上分享题库该怎么办呢，所以在题库列表中需要增加一列“共享密码”，不管这个题库是你上传到公共题库的还是你从公共题库下载过来的，只要你的题库是来自公共题库的一份拷贝，那么“共享密码”这一列就会有数据。（给repo表添加一个origin字段）

#### 改造新计划

*2022/09/04*

最近背面试题一直在用这个小工具，发现还是有诸多小问题的，比如在PC端有界面分辨率的问题，在移动端不能适应浏览器自动变为夜间模式的问题等等。

我想让这个小工具可以给其他用户用，让他们无需关心服务端，只需要下载安装包即可。如果只是每个用户有自己的题库，用户与题库是一对一的关系，且用户与用户之间的题库是相互隔离的。那么改造一下当前程序其实也不难。所以我目前的改造计划是：

1. 增加用户模式，即每个用户可以创建自己的题库，并对其进行管理
2. PC端使用VUE3，抛弃Element-UI，学习使用另一种PC端的框架（iview）
3. 使用uniapp开发app端，仅实现背题部分和背题概况

背题概况搞三个图表
- 根据标签分类，可以看到自己每个标签的题目背过有多少道(大饼型)
- 根据熟悉程度分类，可以看到自己有多少背过的题目是熟悉的，有多少是理解的，有多少是不理解的（大饼型）
- 根据每日的背诵情况，生成线型图，可以看到自己过去一周内每天背了多少道

**数据库改造**

新增用户表，字段有id,昵称，密码

新增题库表，字段有用户id,题库id(uuid，主键)，题库名

题目表，新增字段题库id，是对应着题库表的外键

流程上，用户先使用昵称和密码登录，登录后，先选择题库，再选择出题或背题；若选择出题，提交的题目会新增一条记录在题目表，这个题目通过题库Id与题库表关联，题库表里存在用户与题库的关联，所以用户，题库，题目是都关联在一起的；若选择背题，只会更新题目表里的熟悉程度；当然，我们要新增题库管理相关的功能，比如新增题库，删除题库，编辑题库，用户登录后要先进入题库才能访问题目。

#### 做的有点乱

*2022/08/23*

添加了支持根据关键词搜索题目的功能。  
代码写的跟屎山一样，现在先凑合着用，打算等shoot-bug项目成型后，再来把该项目重写下，出题部分还是用vue写(可能用vue3)，背题部分用uniapp写(这样就可以在手机上背题啦)
